openapi: 3.0.0
info:
  title: SELVA
  version: 1.0.0
  description: Soluciones ElectrÃ³nicas Locales de Valor
servers:
  - url: https://dev.selva.fi.cr
  - url: http://localhost
  - url: "{{URL_API}}"
paths:
  /oauth/authorize:
    get:
      summary: oauth/code
      parameters:
        - name: client_id
          in: query
          schema:
            type: string
          example: 019aa1d3-b622-719d-b880-cda1449b1346
        - name: redirect_uri
          in: query
          schema:
            type: string
          example: https://oauthdebugger.com/debug
        - name: response_type
          in: query
          schema:
            type: string
          example: code
        - name: scope
          in: query
          schema:
            type: string
          example: "*"
      responses: {}
      tags:
        - Auth
  /oauth/token:
    post:
      summary: oauth/token
      responses: {}
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                grant_type:
                  type: string
                client_id:
                  type: string
                client_secret:
                  type: string
                redirect_uri:
                  type: string
                  format: uri
                code:
                  type: string
            example:
              grant_type: authorization_code
              client_id: 0199df95-cc3c-72ce-8c4c-8c06398bc207
              client_secret: EhQS3lvwDug2vrEVM8k6Pc2PmhCAnFdBVRRa5xNM
              redirect_uri: https://oauthdebugger.com/debug
              code: >-
                def5020095c2df29c8fa38cacecb60e50fd559e955b2d36ace5559d1f904b6c43b22e0f7a5b83327167d08edd3f71c317b979b680d2a95a778615e98af51d22c7b675df4baa598654ad174892f49b8ac4dfdafc76eb526dbb789974fe201a2d3bf1a003e9c4fbf184ac1c9bc3120130972fa3b2625666f5be012ca224371c195b8ca98567b897b9f2ed3530ce5fe41f823997f7d65fb8ea7ed1c9948dc800a387a40ca03e1794929d6c853822352861d61f31b6285dfb380b8fe2148ee5e5352fa5c316618232384a78999976d2a2072a179e976922c59b5c9984040c6f6769ddd4da979551c0397c618a0c3ec8e925fd32cb251194850f13d403fa8ed7c9ee5fd6c035f413508a1b9ca0d0a37529dcc9f7d9d26eccbf273163cf004dcddf7bff9f804b5d36019c63da0b3662a1349604c742f103ac046ba99ff060241b57be060ea21adab7b2875acef704024d4db501fdd1919c633b19a8d90bb15d88453ac0809e5f59ddaa8d96b3011c46cfb6f5c38a16e740f6ac2f32e96b39e04b62ad47f363ac267243f6800f58bffafe2f426cd752677d7068552e2e4a11936024a6de3fa0e3b3eb8809a9198ccf485dfe436782eea1ca268ec73d49128381cefc6eb7ddebb32007d624123e1f8b921b3b847fdf8
  /api/user:
    get:
      summary: Get User
      responses: {}
      tags:
        - User
      security:
        - BearerAuth: []
  /api/payments:
    post:
      summary: Send Payment
      parameters:
        - name: X-Idempotency-Key
          in: header
          required: false
          deprecated: false
          schema: {}
          example: "{{$randomUUID}}"
      responses: {}
      tags:
        - Payments
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
            example: |-
              {
                  "from_account_id": "",
                  "amount": "",
                  "recipient_iban": ""
                  // "recipient_phone": ""
                  // "recipient_email": "",
                  // "description": "",
                  // "reference": ""
              }
  /api/payments/validate:
    post:
      summary: Validate Payment
      parameters:
        - name: X-Idempotency-Key
          in: header
          required: false
          deprecated: false
          schema: {}
          example: "{{$randomUUID}}"
      responses: {}
      tags:
        - Payments
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
            example: |-
              {
                  "from_account_id": "",
                  "amount": "",
                  "recipient_id": "",
                  // "recipient_iban": ""
                  "recipient_phone": ""
                  // "recipient_email": "",
                  // "description": "",
                  // "reference": ""
              }
  /api/payments/{id}:
    get:
      summary: Get Payment Details
      responses: {}
      tags:
        - Payments
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/payments/history:
    get:
      summary: Get Historical Transfers
      parameters:
        - name: payment_method
          in: query
          required: false
          deprecated: false
          schema: {}
          example: pin
        - name: transfer_type
          in: query
          required: false
          deprecated: false
          schema: {}
          example: debit
        - name: recipient_identifier
          in: query
          required: false
          deprecated: false
          schema: {}
          example: "111090807"
        - name: limit
          in: query
          required: false
          deprecated: false
          schema: {}
          example: "10"
        - name: offset
          in: query
          required: false
          deprecated: false
          schema: {}
          example: "0"
      responses: {}
      tags:
        - Payments
      security:
        - BearerAuth: []
  /api/payments/service-status:
    get:
      summary: Get Service Status
      responses: {}
      tags:
        - Payments
      security:
        - BearerAuth: []
  /api/accounts/{id}:
    get:
      summary: Get Account
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/accounts:
    get:
      summary: List Accounts
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    post:
      summary: Create Account
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                currency:
                  type: string
            example:
              currency: ""
  /api/accounts/{id}/balance:
    get:
      summary: Get Account Balance
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/accounts/{id}/details:
    get:
      summary: Get Account Details
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/accounts/{id}/transfers:
    get:
      summary: "[DEPRECATED] List Account Transfers"
      parameters:
        - name: from
          in: query
          schema:
            type: string
          example: "{{from}}"
        - name: to
          in: query
          schema:
            type: string
          example: "{{to}}"
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/accounts/{id}/kyc:
    get:
      summary: "[DEPRECATED] Get Account KYC"
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/accounts/{id}/transfers/{transferId}:
    get:
      summary: Get Account Transfer By Id
      responses: {}
      tags:
        - Account
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      - name: transferId
        in: path
        required: true
        schema:
          type: string
  /api/phone/information:
    get:
      summary: Verify Phone Is Registered
      parameters:
        - name: phone_number
          in: query
          required: false
          deprecated: false
          schema: {}
          example: "{{phone_number}}"
      responses: {}
      tags:
        - Verification
      security:
        - BearerAuth: []
  /api/iban/information:
    get:
      summary: Verify IBAN Is Registered
      parameters:
        - name: iban
          in: query
          required: false
          deprecated: false
          schema: {}
          example: "{{recipient_iban}}"
      responses: {}
      tags:
        - Verification
      security:
        - BearerAuth: []
  /api/webhooks/subscriptions/{id}:
    get:
      summary: Get Webhook
      responses: {}
      tags:
        - Webhook
        - server
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    delete:
      summary: Delete Webhook
      responses: {}
      tags:
        - Webhook
        - server
      security:
        - BearerAuth: []
  /api/webhooks/subscriptions:
    get:
      summary: List Webhooks
      parameters:
        - name: page
          in: query
          schema:
            type: integer
          example: "1"
      responses: {}
      tags:
        - Webhook
        - server
      security:
        - BearerAuth: []
    post:
      summary: Create Webhook
      responses: {}
      tags:
        - Webhook
        - server
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                url:
                  type: string
                events:
                  type: string
                max_attempts:
                  type: string
                headers:
                  type: object
                  properties:
                    X-Custom-Header:
                      type: string
            example:
              url: ""
              events: ""
              max_attempts: ""
              headers:
                X-Custom-Header: value
  /api/webhooks/subscriptions/{id}/suspend:
    post:
      summary: Suspend Webhook
      responses: {}
      tags:
        - Webhook
        - server
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/webhooks/subscriptions/{id}/resume:
    post:
      summary: Resume Webhook
      responses: {}
      tags:
        - Webhook
        - server
      security:
        - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
  /api/kindo/pin/NotifyIncomingTransfers:
    post:
      summary: Simulate PIN-Based Credit Transfer
      parameters:
        - name: Signature
          in: header
          required: false
          deprecated: false
          schema: {}
          example: 4e0080ca1c99925242c1c2ef9885d4efa2719b7669dfb8b9ed0a096738b29917
      responses: {}
      tags:
        - Webhook
        - client
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                SecurityInfo:
                  type: string
                Transfers:
                  type: array
                  items:
                    type: object
                    properties:
                      CGPRefNumber:
                        type: integer
                      SINPERefNumber:
                        type: string
                        format: utc-millisec
                      AuthorizationDate:
                        type: string
                        format: style
                      OriginEntity:
                        type: string
                      OriginCustomer:
                        type: object
                        properties:
                          Id:
                            type: string
                          IdType:
                            type: string
                            format: utc-millisec
                          Name:
                            type: string
                          IBAN:
                            type: string
                      DestinationCustomer:
                        type: object
                        properties:
                          Id:
                            type: string
                          IdType:
                            type: string
                            format: utc-millisec
                          Name:
                            type: string
                          IBAN:
                            type: string
                      Amount:
                        type: integer
                      CurrencyCode:
                        type: string
                      Description:
                        type: string
            example:
              SecurityInfo: >-
                7523e3fe7208500918ccee1c457d3c604de4e5d4f415547b821d6a6e8281cb779353352051a03baf4b4b84b95d7612506812d368e23e55fa79de2ab31e31d64e
              Transfers:
                - CGPRefNumber: 2000
                  SINPERefNumber: "2025112481483010196438101"
                  AuthorizationDate: "2025-11-24T11:29:46"
                  OriginEntity: Banco Nacional
                  OriginCustomer:
                    Id: 01-0000-0000
                    IdType: "0"
                    Name: Bobby Fisher
                    IBAN: CR92015101410010010721
                  DestinationCustomer:
                    Id: 07-0258-0327
                    IdType: "0"
                    Name: Leister Alvarado
                    IBAN: CR26037010600861494409
                  Amount: 10001
                  CurrencyCode: CRC
                  Description: Transf PIN de Prueba
  /api/kindo/sinpe-movil/NotifyIncomingTransfers:
    post:
      summary: Simulate SINPE-Based Credit Transfer
      parameters:
        - name: Signature
          in: header
          required: false
          deprecated: false
          schema: {}
          example: 4e0080ca1c99925242c1c2ef9885d4efa2719b7669dfb8b9ed0a096738b29917
      responses: {}
      tags:
        - Webhook
        - client
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                SecurityInfo:
                  type: string
                Transfers:
                  type: array
                  items:
                    type: object
                    properties:
                      CGPRefNumber:
                        type: integer
                      SINPERefNumber:
                        type: string
                        format: utc-millisec
                      AuthorizationDate:
                        type: string
                        format: style
                      OriginCustomer:
                        type: object
                        properties:
                          Id:
                            type: string
                          IdType:
                            type: string
                            format: utc-millisec
                          Name:
                            type: string
                          Phone:
                            type: string
                            format: utc-millisec
                      DestinationCustomer:
                        type: object
                        properties:
                          Id:
                            type: string
                          IdType:
                            type: string
                            format: utc-millisec
                          Name:
                            type: string
                          IBAN:
                            type: string
                          Phone:
                            type: string
                            format: utc-millisec
                      Amount:
                        type: integer
                      CurrencyCode:
                        type: string
                      Description:
                        type: string
            example:
              SecurityInfo: >-
                7523e3fe7208500918ccee1c457d3c604de4e5d4f415547b821d6a6e8281cb779353352051a03baf4b4b84b95d7612506812d368e23e55fa79de2ab31e31d64e
              Transfers:
                - CGPRefNumber: 2001
                  SINPERefNumber: "2025112481483010196438103"
                  AuthorizationDate: "2025-11-24T11:29:46"
                  OriginCustomer:
                    Id: 01-0000-0000
                    IdType: "0"
                    Name: Bobby Fisher
                    Phone: "88881234"
                  DestinationCustomer:
                    Id: 07-0258-0327
                    IdType: "0"
                    Name: Leister Alvarado
                    IBAN: CR26037010600861494409
                    Phone: "88509676"
                  Amount: 2500
                  CurrencyCode: CRC
                  Description: Transf SINPE de Prueba
  /api/IsServiceAvailable:
    post:
      summary: api/IsServiceAvailable
      responses: {}
      tags:
        - ProsoftSpecific
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
